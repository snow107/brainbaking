<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Gtest on Brain Baking</title>
    <link>http://www.brainbaking.com/tags/gtest/index.xml</link>
    <description>Recent content in Gtest on Brain Baking</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>wouter.groeneveld@gmail.com (Wouter Groeneveld)</managingEditor>
    <webMaster>wouter.groeneveld@gmail.com (Wouter Groeneveld)</webMaster>
    <atom:link href="http://www.brainbaking.com/tags/gtest/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>gtest</title>
      <link>http://www.brainbaking.com/wiki/code/c/testing/gtest/</link>
      <pubDate>Wed, 26 Mar 2014 00:00:00 +0000</pubDate>
      <author>wouter.groeneveld@gmail.com (Wouter Groeneveld)</author>
      <guid>http://www.brainbaking.com/wiki/code/c/testing/gtest/</guid>
      <description>

&lt;h1 id=&#34;google-test&#34;&gt;Google Test&lt;/h1&gt;

&lt;p&gt;Downloaden op &lt;a href=&#34;https://code.google.com/p/googletest/downloads/list&#34;&gt;https://code.google.com/p/googletest/downloads/list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Waarom&lt;/strong&gt;?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Platform onafhankelijk&lt;/li&gt;
&lt;li&gt;Snelheid&lt;/li&gt;
&lt;li&gt;Geen gezeik met Managed C++, compatibel met &amp;ldquo;eender wat&amp;rdquo; (enige vereiste: &lt;code&gt;cc&lt;/code&gt; compiler variant)&lt;/li&gt;
&lt;li&gt;Wordt veel gebruikt (Chromium, Stack overflow)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Waarom niet&lt;/strong&gt;?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;slechte of geen integratie met VStudio (zie onder)&lt;/li&gt;
&lt;li&gt;wéér een andere syntax dan MS .NET testen&lt;/li&gt;
&lt;li&gt;beetje awkward assertions&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;assertions-schrijven&#34;&gt;Assertions schrijven&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;../BaseCode/BaseCode.h&amp;quot;

#include &amp;quot;gtest/gtest.h&amp;quot;

TEST(MyTestCase, MyTest_Success)
{
    EXPECT_EQ(2, MySum(1, 1));
}

TEST(MyTestCase, MyTest_Failure)
{
    EXPECT_EQ(3, MySum(1, 2));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Waarbij dan &lt;code&gt;BaseCode&lt;/code&gt; uw system under test zaken bevat (waar &lt;code&gt;MySum&lt;/code&gt; defined is)&lt;/p&gt;

&lt;h4 id=&#34;builden-met-scons-en-g&#34;&gt;Builden met scons en g++&lt;/h4&gt;

&lt;p&gt;Tested in Cygwin Win7 &amp;amp; OSX 10.9&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;Import(&#39;env&#39;)
env ###### env.Clone(CPPPATH  &#39;./:./include&#39;)

env.Append(CXXFLAGS = [&#39;-g&#39;, &#39;-Wall&#39;, &#39;-Wextra&#39;, &#39;-pthread&#39;])
gtest ###### env.Library(target  &#39;gtest&#39;, source = [&#39;src/gtest-all.cc&#39;, &#39;src/gtest_main.cc&#39;])

Return(&#39;gtest&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Zie &lt;a href=&#34;http://www.brainbaking.com/wiki/code/build/scons/&#34;&gt;code/build/scons&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;builden-met-visual-studio&#34;&gt;Builden met Visual Studio&lt;/h4&gt;

&lt;p&gt;&lt;img style=&#39;float: left;&#39; src=&#39;http://www.brainbaking.com/img//code/c/testing/screenshot.png|&#39;&gt;&lt;/p&gt;

&lt;p&gt;Zie &lt;a href=&#34;http://leefrancis.org/2010/11/17/google-test-gtest-setup-with-microsoft-visual-studio-2008-c/&#34;&gt;http://leefrancis.org/2010/11/17/google-test-gtest-setup-with-microsoft-visual-studio-2008-c/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Er zijn 2 &lt;code&gt;.sln&lt;/code&gt; files voorzien in de msvc subdir bij de zipfile, één voor statische links en één voor dynamische. Afhankelijk van uw project (.DLL of .LIB gegenereerde uitkomst), ga je één van beiden moeten compileren. Als je van plan bent om &lt;code&gt;/MDd&lt;/code&gt; te gebruiken (dll + debugging), gebruik dan &lt;code&gt;gtest-md.sln&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Daarna kan je een nieuwe solution maken, package naar executable om de test zelf te runnen (om gtest testen te draaien). Verander deze dingen in het project:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;General &amp;gt; Configuration type  = Application (.EXE)&lt;/li&gt;
&lt;li&gt;C/C++ &amp;gt; General &amp;gt; Additional Include dirs naar gtest/include verwijzen&lt;/li&gt;
&lt;li&gt;C/C++ &amp;gt; Preprocessor &amp;gt; definitions toevoegen &lt;code&gt;_VARIADIC_MAX=10&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Code generation &amp;gt; Runtime library op &lt;code&gt;/MDd&lt;/code&gt; of &lt;code&gt;/MTd&lt;/code&gt; juist zetten (zie boven)&lt;/li&gt;
&lt;li&gt;Linker &amp;gt; Additional Library directories &amp;gt; gtest/Debug (staan reeds binaries indien compiled)&lt;/li&gt;
&lt;li&gt;Linker &amp;gt; Input &amp;gt; Additional dependencies = gtestd.lib;gtest_maind.lib;(rest)&lt;/li&gt;
&lt;li&gt;Linker &amp;gt; System &amp;gt; SubSystem Console &lt;code&gt;/SYBSYSTEM:CONSOLE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Linker &amp;gt; Input &amp;gt; Module Definition file leeg (indien van DLL naar EXE veranderd kan hier wat brol in zitten)&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;visual-studio-2012-en-std-problemen&#34;&gt;Visual Studio 2012 en STD problemen&lt;/h4&gt;

&lt;p&gt;Fouten als&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1&amp;gt;a:&amp;lt;br/&amp;gt;gtest&amp;lt;br/&amp;gt;include&amp;lt;br/&amp;gt;gtest&amp;lt;br/&amp;gt;gtest-printers.h(550): error C2977: &#39;std::tuple&#39; : too many template arguments
1&amp;gt;          b:&amp;lt;br/&amp;gt;program files (x86)&amp;lt;br/&amp;gt;microsoft visual studio 2012&amp;lt;br/&amp;gt;vc&amp;lt;br/&amp;gt;include&amp;lt;br/&amp;gt;utility(73) : see declaration of &#39;std::tuple&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Op te lossen met een preprocessor macro _VARIADIC_MAX=10, zie &lt;a href=&#34;http://stackoverflow.com/questions/12558327/google-test-in-visual-studio-2012&#34;&gt;http://stackoverflow.com/questions/12558327/google-test-in-visual-studio-2012&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&#34;integratie-met-visual-studio-2008-2010&#34;&gt;Integratie met Visual Studio &lt;sup&gt;2008&lt;/sup&gt;&amp;frasl;&lt;sub&gt;2010&lt;/sub&gt;&lt;/h5&gt;

&lt;p&gt;&lt;a href=&#34;http://googletestaddin.codeplex.com/documentation&#34;&gt;GoogleTestAddin&lt;/a&gt; (kopieer 2 files naar C:&lt;br/&gt;Users&lt;br/&gt;bkwog&lt;br/&gt;Documents&lt;br/&gt;Visual Studio 2008&lt;br/&gt;Addins, map misschien nog aanmaken)&lt;/p&gt;

&lt;p&gt;Niet super nuttig, een knopje om testen snel te herdraaien (of één die geselecteerd is), beter dan post-build actie zie boven&amp;hellip;&lt;/p&gt;

&lt;h4 id=&#34;integratie-met-visual-studio-2012&#34;&gt;Integratie met Visual Studio 2012&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;http://visualstudiogallery.msdn.microsoft.com/f00c0f72-ac71-4c80-bf8b-6fe381548031&#34;&gt;Google Test Adapter&lt;/a&gt; plugin (1.1 - geen actieve development?)&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>