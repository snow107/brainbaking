<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Migrating from Extjs to React gradually</title>
  
  <meta name="author" content="Wouter Groeneveld"/>
  <meta name="generator" content="Hugo 0.18.1" />
  <link href='http://www.brainbaking.com//img/favicon.ico' rel='icon' type='image/x-icon'/>

  <link rel="alternate" href="http://www.brainbaking.com/index.xml" type="application/rss+xml" title="Brain Baking">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/bootstrap.min.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/pygment_highlights.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com/css/highlight.min.css">
  
  
  <meta property="og:title" content="Migrating from Extjs to React gradually" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/post/react-in-extjs/" />
  <meta property="og:image" content="/img/avatar-icon.png" />
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.brainbaking.com/">
        <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;&nbsp;
        Brain Baking
      </a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      <li id="google-search-wrapper">
	<script>
	(function() {
	  var cx = '015035874764642922467:uhhwew4ykvm';
	  var gcse = document.createElement('script');
	  gcse.type = 'text/javascript';
	  gcse.async = true;
	  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	  var s = document.getElementsByTagName('script')[0];
	  s.parentNode.insertBefore(gcse, s);
	})();
	</script>

	<gcse:search></gcse:search>

	<form onsubmit="return false;">
		<label for="searchInput"><i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">Search</span></label>
		<input type="text" id="searchInput" placeholder="Search">
	</form>

	<script>
	(function() {
		document.querySelector('#searchInput').addEventListener("keypress", function(event) {
			if(event.keyCode === 13) {
				event.stopPropagation();
				document.querySelector('#___gcse_0 input').value = document.querySelector('#searchInput').value;
				document.querySelector('.gsc-search-button input').click();

				var modal = document.querySelector('.gsc-modal-background-image');
				modal.attributes['class'].value = "gsc-modal-background-image gsc-modal-background-image-visible";
			}
		});
	})();
	</script>
</li>

      
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Menu</a>
            <div class="navlinks-children">
            
              <a href="/wiki/"><i class='fa fa-wikipedia-w'></i>&nbsp;&nbsp;Wiki</a>
            
              <a href="/tags"><i class='fa fa-tags'></i>&nbsp;&nbsp;Tags</a>
            
              <a href="/about"><i class='fa fa-address-card-o'></i>&nbsp;&nbsp;About me</a>
            
              <a href="/talks"><i class='fa fa-graduation-cap'></i>&nbsp;&nbsp;Talks</a>
            
              <a href="/books"><i class='fa fa-book' aria-hidden='true'></i>&nbsp;&nbsp;Books</a>
            
            </div>
          </li>
        
      
      </ul>
    </div>

	<div class="avatar-container">
	  <div class="avatar-img-border">
      
          <a title="Brain Baking" href="http://www.brainbaking.com/">
              <img class="avatar-img" src="http://www.brainbaking.com//img/avatar-icon.png" alt="Brain Baking" />
          </a>
      
	  </div>
	</div>

  </div>
</nav>

    



  
    <div id="header-big-imgs" data-num-img=1 data-img-src-1="/img/Migrating%20from%20Extjs%20to%20React%20gradually.jpg"></div>
  

  <header class="header-section has-img">
  
    <div class="big-img intro-header">
        <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Migrating from Extjs to React gradually</h1>
      
        
      <h2 class="post-subheading">Migrating from Extjs to React gradually</h2>
      
      
      
      
      <span class="post-meta">26 January 2016</span>
      
        </div>
      </div>
    </div>
  </div>
      <span class='img-desc'></span>
    </div>
  
  <div class="intro-header no-img">
      <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Migrating from Extjs to React gradually</h1>
      
        
      <h2 class="post-subheading">Migrating from Extjs to React gradually</h2>
      
      
      
      
      <span class="post-meta">26 January 2016</span>
      
        </div>
      </div>
    </div>
  </div>
  </div>
  </header>


    <div class="container" role="main">	  
      
        <div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      
  <i class="fa fa-tags" style="float: left;" aria-hidden="true"></i>
  <ul id="tags">
  
   <li><a href="/tags/javascript">javascript</a> </li>
  
   <li><a href="/tags/extjs">extjs</a> </li>
  
   <li><a href="/tags/react">react</a> </li>
  
  </ul>



      <article role="main" class="blog-post">
          <p>We were looking for a few alternatives to our big ExtJS 4 application. Since it&rsquo;s not that easy to completely migrate from one front-end framework to the next, a possible solution would be to start developing new parts in another framework. There&rsquo;s a lot of domain logic spread in Ext views and controllers - which shouldn&rsquo;t be there, we are well aware of that. Let&rsquo;s call it &ldquo;legacy&rdquo; :-)</p>

<p>The application right now uses Extjs as UI and C# as backend, and lets ext do the loading of the views/controllers (living in app.js like most ext applications). There&rsquo;s no ecosystem set up like modern javascript applications - build systems like Grunt, Gulp, node package managers, Browserify, &hellip; are all not used. We do use sencha command to minify stuff. To be able to develop new modules without having to worry about extjs, one of the possibilities would be to use iframes. That enables us to (scenario) test the module using it&rsquo;s own routing. It&rsquo;s wrapped inside an Extjs view with an iframe:</p>

<pre><code>    Ext.define('App.view.utilities.desktop.ReactWindow', {
        extend: 'Ext.form.Panel',
        alias: 'widget.App_view_utilities_desktop_ReactWindow',

        bodyPadding: 5,
        width: 600,

        layout: {
            type: 'vbox',
            align: 'stretch'
        },

        initComponent: function() {
            var me = this;

            var dynamicPanel = new Ext.Component({
                autoEl: {
                    tag: 'iframe',
                    style: 'border: none',
                    src: me.url
                },
                flex: 1
            });

            Ext.apply(me, {
                title: 'React',
                defaults: {
                    labelWidth: 120
                },
                items: [dynamicPanel]
            });
            me.callParent();
        }
    });
</code></pre>

<p>When the module is triggered in the main app, we simply add the panel to the desktop:</p>

<pre><code>    this.addPanel(Ext.create('App.view.utilities.desktop.ReactWindow', {
        url: 'react/mod/someurl/'
    }));
</code></pre>

<p>Our app structure in the GUI folder would be something like this:</p>

<p>[GUI]<br/>
* global.asax<br/>
* default.aspx<br/>
**** [app] -&gt; extjs<br/>
**** [react] -&gt; reactjs<br/></p>

<p>That&rsquo;s simple enough. But how would one be able to open new Ext panels from within the React sub-application? That would be done via custom events thrown to the parent window. Catching these is just a matter of adding this to some controller in Extjs:</p>

<pre><code>    window.addEventListener('react', function(e) {
        me.onReactEvent(e.detail, e);
    });
</code></pre>

<p>The <code>detail</code> property is part of a custom event, thrown in a react component. This below might be some cell component, taken from the <a href="https://facebook.github.io/fixed-data-table/">fixed-data-table</a> example:</p>

<pre><code>class MyLinkCell extends React.Component {
    clicked(e) {
        const el = e.target;
        const eventObj = {
            'detail': {
                'type': 'downloadlink',
                'url': 'react/some/detail/url' 
            }
        };

        console.log('clicked - &quot;react&quot; event thrown:');
        console.dir(eventObj);
        if(window.parent) {
            window.parent.dispatchEvent(new CustomEvent('react', eventObj));
        }
    }

  render() {
    const {rowIndex, field, data} = this.props;
    const link = data[rowIndex][field];
    return (
      &lt;Cell&gt;
        &lt;a onClick={this.clicked} href='#'&gt;{link}&lt;/a&gt;
      &lt;/Cell&gt;
    );
  }
}
</code></pre>

<p>Of course this is more or less the same when for instance using Angular2 instead of React, the custom event is part of the JS standard, see <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events">Creating and triggering events</a> from MDN.</p>

<p>To be able to use source maps in conjunction with Browserify/Watchify, I had to tweak some parameters in package.json:</p>

<pre><code>`watchify index.js --verbose -d -t babelify --sourceMapRelative . --outfile=bundle.js`
</code></pre>

<p>Things we still need to research:</p>

<ul>
<li>How well does React compare to Angular2 in terms of components? For instance react doesn&rsquo;t include <a href="http://www.kriasoft.com/react-routing/">routing</a> by default. We&rsquo;ll need to rewrite some already-extjs-custom components in the target framework.</li>
<li>How should we include the build ecosystem (npm, gulp/grunt/browserify, &hellip;) into our C# build solution and Teamcity build? Will <a href="http://reactjs.net/">http://reactjs.net/</a> help for instance?</li>
<li>Can we use <a href="http://reactjs.net/">http://reactjs.net/</a> to render serverside components?</li>
<li>Which build tool should we use? We&rsquo;re being overwhelmed by choice: bower/npm as package manager, I&rsquo;ve seen stuff like <a href="http://www.christianalfoni.com/articles/2015_10_01_Taking-the-next-step-with-react-and-webpack">Webpack in conjunction with React</a>, &hellip; The list is huge if you&rsquo;ve not kept up with the JS technology news.</li>
</ul>

<p>One of the things we liked a lot was typescript or ES6 and the ability to use <code>=&gt; ()</code> and promises. Enabling this requires a transpiler or a polyfill like <a href="https://babeljs.io/">Babel JS</a>, but maybe this as a build step in sencha command will also ease some pain we&rsquo;re having with the current Ext code.</p>

      </article>

      <ul class="blog-pagination blog-pager">
        
        <li>
          &larr; Previous Post: <a href="http://www.brainbaking.com/post/webdriver-exception-handling/" data-toggle="tooltip" data-placement="top" title="Webdriver Exception Handling">Webdriver Exception Handling</a>
          <span class="blog-pagination-date"> <i class="fa fa-calendar-o" aria-hidden="true"></i> 01/14/140016</span>
        </li>
        
        
        <li>
          &rarr; Next Post: <a href="http://www.brainbaking.com/post/vb6-unit-testing/" data-toggle="tooltip" data-placement="top" title="Unit testing in Legacy Projects: VB6">Unit testing in Legacy Projects: VB6</a>
          <span class="blog-pagination-date"> <i class="fa fa-calendar-o" aria-hidden="true"></i> 12/27/270126</span>
        </li>
        
      </ul>

      <div class="disqus-comments">

	<div id="disqus_thread"></div>
	<script type="text/javascript">
		(function() {
		      
		      
		      if (window.location.hostname == "localhost")
		                return;

		      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		      var disqus_shortname = '';
		      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</div>


    </div>
  </div>
</div>

      
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="https://github.com/wgroeneveld" target="_blank" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
		      
          <li>
            <a href="mailto:wouter.groeneveld@gmail.com" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
	    	  
          
           
          
          
          
          
          <li>
            <a href="https://www.pinterest.com/woutergroenev" target="_blank" title="Pinterest">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-pinterest fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li>
            <a href="https://www.goodreads.com/user/show/5451893-wouter" target="_blank" title="Goodreads">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-book fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

    		  <li>
      			<a href="http://www.brainbaking.com/index.xml" title="RSS">
      			  <span class="fa-stack fa-lg">
        				<i class="fa fa-circle fa-stack-2x"></i>
        				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      			  </span>
      			</a>
    		  </li>		

        </ul>
        <p class="credits copyright text-muted">
    	  <a href="http://www.brainbaking.com/about">Wouter Groeneveld</a>
    	  &nbsp;&bull;&nbsp;
    	  No copyright - <a href="https://github.com/wgroeneveld/brainbaking" target="_blank">Hack away!</a>
    		  
    	  
    	  &nbsp;&bull;&nbsp;
    	  <a href="http://www.brainbaking.com/">
          <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;Brain Baking
        </a>
    	  
  	    </p>
  	    
    	<p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.18.1</a> powered &nbsp;&bull;&nbsp; Theme by <a href="https://github.com/halogenica/beautifulhugo" target="_blank">Beautiful Hugo</a> adapted to <a href="https://github.com/wgroeneveld/beautifulbaking">Beautiful Baking</a>
          
    	</p>
      </div>
    </div>
  </div>
</footer>

<script src="http://www.brainbaking.com//js/jquery-1.11.2.min.js"></script>
<script src="http://www.brainbaking.com//js/bootstrap.min.js"></script>
<script src="http://www.brainbaking.com//js/main.js"></script>
<script src="http://www.brainbaking.com/js/highlight.min.js"></script>
<script async defer src="//assets.pinterest.com/js/pinit.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-45748221-1', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
