<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>jsunit</title>
  
  <meta name="author" content="Wouter Groeneveld"/>
  <meta name="generator" content="Hugo 0.21" />
  <link href='https://brainbaking.com//img/favicon.ico' rel='icon' type='image/x-icon'/>

  <link rel="alternate" href="https://brainbaking.com/index.xml" type="application/rss+xml" title="Brain Baking">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://brainbaking.com//css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://brainbaking.com//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://brainbaking.com//css/pygment_highlights.css" />
  <link rel="stylesheet" href="https://brainbaking.com/css/highlight.min.css">
  
  
  <meta property="og:title" content="jsunit" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/wiki/code/build/jsunit/" />
  <meta property="og:image" content="/img/avatar-icon.png" />
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://brainbaking.com/">
        <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;&nbsp;
        Brain Baking
      </a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      <li id="google-search-wrapper">
	<script>
	(function() {
	  var cx = '015035874764642922467:uhhwew4ykvm';
	  var gcse = document.createElement('script');
	  gcse.type = 'text/javascript';
	  gcse.async = true;
	  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	  var s = document.getElementsByTagName('script')[0];
	  s.parentNode.insertBefore(gcse, s);
	})();
	</script>

	<gcse:search></gcse:search>

	<form onsubmit="return false;">
		<label for="searchInput"><i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">Search</span></label>
		<input type="text" id="searchInput" placeholder="Search">
	</form>

	<script>
	(function() {
		document.querySelector('#searchInput').addEventListener("keypress", function(event) {
			if(event.keyCode === 13) {
				event.stopPropagation();
				document.querySelector('#___gcse_0 input').value = document.querySelector('#searchInput').value;
				document.querySelector('.gsc-search-button button').click();

				var modal = document.querySelector('.gsc-modal-background-image');
				modal.attributes['class'].value = "gsc-modal-background-image gsc-modal-background-image-visible";
			}
		});
	})();
	</script>
</li>

      
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Menu</a>
            <div class="navlinks-children">
            
              <a href="/wiki/"><i class='fa fa-wikipedia-w'></i>&nbsp;&nbsp;Wiki</a>
            
              <a href="/tags"><i class='fa fa-tags'></i>&nbsp;&nbsp;Tags</a>
            
              <a href="/about"><i class='fa fa-address-card-o'></i>&nbsp;&nbsp;About me</a>
            
              <a href="/teaching"><i class='fa fa-graduation-cap'></i>&nbsp;&nbsp;Teaching</a>
            
              <a href="/books"><i class='fa fa-book' aria-hidden='true'></i>&nbsp;&nbsp;Books</a>
            
            </div>
          </li>
        
      
      </ul>
    </div>

	<div class="avatar-container">
	  <div class="avatar-img-border">
      
          <a title="Brain Baking" href="https://brainbaking.com/">
              <img class="avatar-img" src="https://brainbaking.com//img/avatar-icon.png" alt="Brain Baking" />
          </a>
      
	  </div>
	</div>

  </div>
</nav>

    



  

  <header class="header-section ">
  
  <div class="intro-header no-img">
      <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="wiki-heading">
          <h1>jsunit</h1>
      
      
      
        </div>
      </div>
    </div>
  </div>
  </div>
  </header>


    <div class="container" role="main">	  
      
        
  <i class="fa fa-tags" style="float: left;" aria-hidden="true"></i>
  <ul id="tags">
  
   <li><a href="/tags/code">code</a> </li>
  
   <li><a href="/tags/build">build</a> </li>
  
   <li><a href="/tags/jsunit">jsunit</a> </li>
  
  </ul>


        

<h1 id="jsunit-testen">JsUnit Testen</h1>

<h2 id="integratie-met-een-ant-build">Integratie met een Ant build</h2>

<p>Zie <a href="http://www.jsunit.net/">http://www.jsunit.net/</a></p>

<p>Hoofd JUnit klasse die gestart moet worden als junit tag vanuit ant: <strong><code>net.jsunit.StandaloneTest</code></strong><br/><br/>
Voor uitleg over de parameters, zie jsunit website.</p>

<p>❗️ Belangrijk: JsUnit draait binnen een aparte context op een embedded Jetty server. Dit wil zeggen dat javascript test suites (html pagina&rsquo;s) die javascript files includen wel binnen de context staan, maar javascript files in een web project binnen eclipse bijvoorbeeld niet. Oplossing: kopiëer alle JS files voordat de test gedraaid wordt binnen de context.</p>

<p>Voor JS files te testen binnen een jar moeten die ook unjarred worden.</p>

<h3 id="ant-build-snippet">Ant build snippet</h3>

<pre><code class="language-xml">&lt;!-- JsUnit properties --&gt;
&lt;property name######&quot;jsunit.lib.dir&quot; value&quot;${basedir}/../buildscripts/${lib.dir}/jsunit&quot; /&gt;
&lt;property name######&quot;jsunit.browserFileNames&quot; value&quot;c:&lt;br/&gt;&lt;br/&gt;program files&lt;br/&gt;&lt;br/&gt;internet explorer&lt;br/&gt;&lt;br/&gt;iexplore.exe,c:&lt;br/&gt;&lt;br/&gt;program files&lt;br/&gt;&lt;br/&gt;Mozilla Firefox&lt;br/&gt;&lt;br/&gt;firefox.exe&quot; /&gt;
&lt;property name######&quot;jsunit.port&quot; value&quot;9001&quot; /&gt;
&lt;property name######&quot;jsunit.suite&quot; value&quot;suite.html&quot; /&gt;
&lt;property name######&quot;jsunit.url&quot; value&quot;http:*localhost:9001/jsunit/testRunner.html?testPage######http:*localhost:9001/jsunit/tests/${jsunit.suite}&amp;amp;autoRuntrue&quot; /&gt;
&lt;property name######&quot;jsunit.common.jar&quot; value&quot;${web.lib.dir}/commonResources.jar&quot; /&gt;
&lt;property name######&quot;jsunit.src.js&quot; value&quot;${web.dir}/resources/scripts&quot; /&gt;
&lt;property name######&quot;jsunit.src.tests&quot; value&quot;test/jsunit&quot; /&gt;
&lt;property name######&quot;jsunit.target&quot; value&quot;${target.dir}/jsunit&quot; /&gt;
&lt;property name######&quot;jsunit.target.js&quot; value&quot;${jsunit.target}/tests/js&quot; /&gt;
&lt;property name######&quot;jsunit.target.tests&quot; value&quot;${jsunit.target}/tests&quot; /&gt;

&lt;path id=&quot;jsunit.classpath&quot;&gt;
    ```et
&lt;/path&gt;

&lt;target name######&quot;jsunit-tests&quot; depends&quot;-clean-reports, -compile-test, -jsunit, -junit-report&quot;/&gt;

    &lt;target name######&quot;-jsunit&quot; if&quot;jsunit.tests.present&quot;&gt;
        &lt;junit failureproperty######&quot;junit.failed&quot; errorproperty&quot;junit.error&quot;&gt;
            &lt;formatter type######&quot;plain&quot; usefile&quot;false&quot;/&gt;
            &lt;classpath refid=&quot;jsunit.classpath&quot;/&gt;
            &lt;sysproperty key######&quot;java.util.logging.config.file&quot; value&quot;${jsunit.target.tests}/logging.properties&quot;/&gt;
            &lt;sysproperty key######&quot;browserFileNames&quot; value&quot;${jsunit.browserFileNames}&quot;/&gt;
            &lt;sysproperty key######&quot;description&quot; value&quot;JsUnit server&quot;/&gt;
            &lt;sysproperty key######&quot;logsDirectory&quot; value&quot;${report.dir}&quot;/&gt;
            &lt;sysproperty key######&quot;port&quot; value&quot;${jsunit.port}&quot;/&gt;
            &lt;sysproperty key######&quot;resourceBase&quot; value&quot;${jsunit.target}&quot;/&gt;
            &lt;sysproperty key######&quot;url&quot; value&quot;${jsunit.url}&quot;/&gt;
            &lt;test name=&quot;net.jsunit.StandaloneTest&quot;/&gt;
        &lt;/junit&gt;
    &lt;/target&gt;
    
    &lt;target name######&quot;-compile-jsunit&quot; depends&quot;-jsunit-check&quot; if=&quot;jsunit.tests.present&quot;&gt;
        &lt;antcall target=&quot;-jsunit-copy-lib&quot; /&gt;
        &lt;antcall target=&quot;-jsunit-copy-common-js&quot; /&gt;
        &lt;antcall target=&quot;-jsunit-copy-tests&quot; /&gt;
        &lt;antcall target=&quot;-jsunit-copy-js&quot; /&gt;
        &lt;antcall target=&quot;-jsunit-build-suite&quot; /&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-check&quot;&gt;
        &lt;available file######&quot;${jsunit.src.tests}&quot; property&quot;jsunit.tests.present&quot;/&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-copy-lib&quot;&gt;
        &lt;copy todir=&quot;${jsunit.target}&quot;&gt;
            ```et
        &lt;/copy&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-copy-common-js&quot;&gt;
        &lt;unjar src######&quot;${jsunit.common.jar}&quot; dest&quot;${jsunit.target.js}/common&quot;&gt;
            &lt;patternset&gt;
                &lt;include name=&quot;**/*.js&quot; /&gt;
                &lt;exclude name=&quot;**/resourcesmini/**&quot;/&gt;
            &lt;/patternset&gt;
            &lt;mapper type=&quot;flatten&quot;/&gt;
        &lt;/unjar&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-copy-tests&quot;&gt;
        &lt;copy todir=&quot;${jsunit.target.tests}&quot;&gt;
            ```et
        &lt;/copy&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-copy-js&quot;&gt;
        &lt;copy todir=&quot;${jsunit.target.js}&quot;&gt;
            ```et
        &lt;/copy&gt;
    &lt;/target&gt;
    
    &lt;target name=&quot;-jsunit-build-suite&quot;&gt;
        &lt;taskdef name######&quot;jsUnitSuiteBuilder&quot; classname&quot;be.cegeka.ant.JsUnitSuiteBuilder&quot; classpath=&quot;${jsunit.lib.dir}/java/ant/cegekant.jar&quot; /&gt;
        &lt;jsUnitSuiteBuilder testdir######&quot;${jsunit.target.tests}&quot; testsuitefilename&quot;${jsunit.target.tests}/${jsunit.suite}&quot;
            suitetemplatefilename=&quot;${jsunit.target.tests}/suite_template.html&quot;/&gt;
    &lt;/target&gt;
</code></pre>

<h3 id="suite-html-automatisch-genereren">Suite.html automatisch genereren</h3>

<p><code>testRunner.html</code> draait standaard een html pagina als test suite waar alle anderen geïnclude in worden. Een JS test methode moet beginnen met <code>test</code>X(). Standaard assertions kunnen gebruikt worden die deel van JsUnit zelf zijn, zie die documentatie.</p>

<p>Om niet altijd de hoofd suite aan te moeten passen, kan een ant plugin gemaakt worden die een bepaald pad scant op html files en deze recursief toevoegt aan de suite zelf. Die wordt bij elke build dus in principe overschreven.</p>

<p>Hiervoor is een plugin geschreven op: <a href="http://code.google.com/p/cegekant/">http://code.google.com/p/cegekant/</a><br/><br/>
<a href="http://code.google.com/p/cegekant/source/browse/trunk/src/be/cegeka/ant/JsUnitSuiteBuilder.java">Volledige source suite builder</a></p>

      
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="https://github.com/wgroeneveld" target="_blank" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
		      
          <li>
            <a href="mailto:wouter.groeneveld@gmail.com" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
	    	  
          
           
          
          
          
          
          <li>
            <a href="https://www.pinterest.com/woutergroenev" target="_blank" title="Pinterest">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-pinterest fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li>
            <a href="https://www.goodreads.com/user/show/5451893-wouter" target="_blank" title="Goodreads">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-book fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

    		  <li>
      			<a href="https://brainbaking.com/index.xml" title="RSS">
      			  <span class="fa-stack fa-lg">
        				<i class="fa fa-circle fa-stack-2x"></i>
        				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      			  </span>
      			</a>
    		  </li>		

        </ul>
        <p class="credits copyright text-muted">
    	  <a href="https://brainbaking.com/about">Wouter Groeneveld</a>
    	  &nbsp;&bull;&nbsp;
    	  No copyright - <a href="https://github.com/wgroeneveld/brainbaking" target="_blank">Hack away!</a>
    		  
    	  
    	  &nbsp;&bull;&nbsp;
    	  <a href="https://brainbaking.com/">
          <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;Brain Baking
        </a>
    	  
  	    </p>
  	    
    	<p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.21</a> powered &nbsp;&bull;&nbsp; Theme by <a href="https://github.com/halogenica/beautifulhugo" target="_blank">Beautiful Hugo</a> adapted to <a href="https://github.com/wgroeneveld/beautifulbaking">Beautiful Baking</a>
          
    	</p>
      </div>
    </div>
  </div>
</footer>

<script src="https://brainbaking.com//js/jquery-1.11.2.min.js"></script>
<script src="https://brainbaking.com//js/bootstrap.min.js"></script>
<script src="https://brainbaking.com//js/main.js"></script>
<script src="https://brainbaking.com/js/highlight.min.js"></script>
<script async defer src="//assets.pinterest.com/js/pinit.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-45748221-1', 'auto');
ga('send', 'pageview');
</script>



  </body>
</html>
