<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>gtest</title>
  
  <meta name="author" content="Wouter Groeneveld"/>
  <meta name="generator" content="Hugo 0.18.1" />
  <link href='http://www.brainbaking.com//img/favicon.ico' rel='icon' type='image/x-icon'/>

  <link rel="alternate" href="http://www.brainbaking.com/index.xml" type="application/rss+xml" title="Brain Baking">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/bootstrap.min.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="http://www.brainbaking.com//css/pygment_highlights.css" />
  <link rel="stylesheet" href="http://www.brainbaking.com/css/highlight.min.css">
  
  
  <meta property="og:title" content="gtest" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/wiki/code/c/testing/gtest/" />
  <meta property="og:image" content="/img/avatar-icon.png" />
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.brainbaking.com/">
        <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;&nbsp;
        Brain Baking
      </a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
          <a title="Blog" href="/">Blog</a>
  	      </li>
  	    
      
        
          <li>
          <a title="Wiki" href="/wiki/">Wiki</a>
  	      </li>
  	    
      
        
          <li>
          <a title="About me" href="/about">About me</a>
  	      </li>
  	    
      
      </ul>
    </div>

	<div class="avatar-container">
	  <div class="avatar-img-border">
      
          <a title="Brain Baking" href="http://www.brainbaking.com/">
              <img class="avatar-img" src="http://www.brainbaking.com//img/avatar-icon.png" alt="Brain Baking" />
          </a>
      
	  </div>
	</div>

  </div>
</nav>

    



  

  <header class="header-section ">
  
  <div class="intro-header no-img">
      <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="wiki-heading">
          <h1>gtest</h1>
      
      
      
        </div>
      </div>
    </div>
  </div>
  </div>
  </header>


    <div class="container" role="main">	  
      
        

<h1 id="google-test">Google Test</h1>

<p>Downloaden op <a href="https://code.google.com/p/googletest/downloads/list">https://code.google.com/p/googletest/downloads/list</a></p>

<p><strong>Waarom</strong>?</p>

<ol>
<li>Platform onafhankelijk</li>
<li>Snelheid</li>
<li>Geen gezeik met Managed C++, compatibel met &ldquo;eender wat&rdquo; (enige vereiste: <code>cc</code> compiler variant)</li>
<li>Wordt veel gebruikt (Chromium, Stack overflow)</li>
</ol>

<p><strong>Waarom niet</strong>?</p>

<ol>
<li>slechte of geen integratie met VStudio (zie onder)</li>
<li>wéér een andere syntax dan MS .NET testen</li>
<li>beetje awkward assertions</li>
</ol>

<h4 id="assertions-schrijven">Assertions schrijven</h4>

<pre><code class="language-c">#include &quot;../BaseCode/BaseCode.h&quot;

#include &quot;gtest/gtest.h&quot;

TEST(MyTestCase, MyTest_Success)
{
    EXPECT_EQ(2, MySum(1, 1));
}

TEST(MyTestCase, MyTest_Failure)
{
    EXPECT_EQ(3, MySum(1, 2));
}
</code></pre>

<p>Waarbij dan <code>BaseCode</code> uw system under test zaken bevat (waar <code>MySum</code> defined is)</p>

<h4 id="builden-met-scons-en-g">Builden met scons en g++</h4>

<p>Tested in Cygwin Win7 &amp; OSX 10.9</p>

<pre><code class="language-python">Import('env')
env ###### env.Clone(CPPPATH  './:./include')

env.Append(CXXFLAGS = ['-g', '-Wall', '-Wextra', '-pthread'])
gtest ###### env.Library(target  'gtest', source = ['src/gtest-all.cc', 'src/gtest_main.cc'])

Return('gtest')
</code></pre>

<p>Zie <a href="/wiki/code/build/scons/">code/build/scons</a></p>

<h4 id="builden-met-visual-studio">Builden met Visual Studio</h4>

<p><img style='float: left;' src='/img//code/c/testing/screenshot.png|'></p>

<p>Zie <a href="http://leefrancis.org/2010/11/17/google-test-gtest-setup-with-microsoft-visual-studio-2008-c/">http://leefrancis.org/2010/11/17/google-test-gtest-setup-with-microsoft-visual-studio-2008-c/</a></p>

<p>Er zijn 2 <code>.sln</code> files voorzien in de msvc subdir bij de zipfile, één voor statische links en één voor dynamische. Afhankelijk van uw project (.DLL of .LIB gegenereerde uitkomst), ga je één van beiden moeten compileren. Als je van plan bent om <code>/MDd</code> te gebruiken (dll + debugging), gebruik dan <code>gtest-md.sln</code>.</p>

<p>Daarna kan je een nieuwe solution maken, package naar executable om de test zelf te runnen (om gtest testen te draaien). Verander deze dingen in het project:</p>

<ol>
<li>General &gt; Configuration type  = Application (.EXE)</li>
<li>C/C++ &gt; General &gt; Additional Include dirs naar gtest/include verwijzen</li>
<li>C/C++ &gt; Preprocessor &gt; definitions toevoegen <code>_VARIADIC_MAX=10</code></li>
<li>Code generation &gt; Runtime library op <code>/MDd</code> of <code>/MTd</code> juist zetten (zie boven)</li>
<li>Linker &gt; Additional Library directories &gt; gtest/Debug (staan reeds binaries indien compiled)</li>
<li>Linker &gt; Input &gt; Additional dependencies = gtestd.lib;gtest_maind.lib;(rest)</li>
<li>Linker &gt; System &gt; SubSystem Console <code>/SYBSYSTEM:CONSOLE</code></li>
<li>Linker &gt; Input &gt; Module Definition file leeg (indien van DLL naar EXE veranderd kan hier wat brol in zitten)</li>
</ol>

<h4 id="visual-studio-2012-en-std-problemen">Visual Studio 2012 en STD problemen</h4>

<p>Fouten als</p>

<pre><code>1&gt;a:&lt;br/&gt;gtest&lt;br/&gt;include&lt;br/&gt;gtest&lt;br/&gt;gtest-printers.h(550): error C2977: 'std::tuple' : too many template arguments
1&gt;          b:&lt;br/&gt;program files (x86)&lt;br/&gt;microsoft visual studio 2012&lt;br/&gt;vc&lt;br/&gt;include&lt;br/&gt;utility(73) : see declaration of 'std::tuple'
</code></pre>

<p>Op te lossen met een preprocessor macro _VARIADIC_MAX=10, zie <a href="http://stackoverflow.com/questions/12558327/google-test-in-visual-studio-2012">http://stackoverflow.com/questions/12558327/google-test-in-visual-studio-2012</a></p>

<h5 id="integratie-met-visual-studio-2008-2010">Integratie met Visual Studio <sup>2008</sup>&frasl;<sub>2010</sub></h5>

<p><a href="http://googletestaddin.codeplex.com/documentation">GoogleTestAddin</a> (kopieer 2 files naar C:<br/>Users<br/>bkwog<br/>Documents<br/>Visual Studio 2008<br/>Addins, map misschien nog aanmaken)</p>

<p>Niet super nuttig, een knopje om testen snel te herdraaien (of één die geselecteerd is), beter dan post-build actie zie boven&hellip;</p>

<h4 id="integratie-met-visual-studio-2012">Integratie met Visual Studio 2012</h4>

<p><a href="http://visualstudiogallery.msdn.microsoft.com/f00c0f72-ac71-4c80-bf8b-6fe381548031">Google Test Adapter</a> plugin (1.1 - geen actieve development?)</p>

      
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="https://github.com/wgroeneveld" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
		      
          <li>
            <a href="mailto:wouter.groeneveld@gmail.com" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		      
	    	  
          
           
          
          
          

    		  <li>
      			<a href="http://www.brainbaking.com/index.xml" title="RSS">
      			  <span class="fa-stack fa-lg">
        				<i class="fa fa-circle fa-stack-2x"></i>
        				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      			  </span>
      			</a>
    		  </li>		

        </ul>
        <p class="credits copyright text-muted">
    	  Wouter Groeneveld
    	  &nbsp;&bull;&nbsp;
    	  2016
    		  
    	  
    	  &nbsp;&bull;&nbsp;
    	  <a href="http://www.brainbaking.com/">
          <i class="fa fa-lightbulb-o" aria-hidden="true"></i>&nbsp;Brain Baking
        </a>
    	  
  	    </p>
  	    
    	<p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.18.1</a> powered &nbsp;&bull;&nbsp; Theme by <a href="https://github.com/halogenica/beautifulhugo" target="_blank">Beautiful Hugo</a> adapted to <a href="https://github.com/wgroeneveld/beautifulbaking">Beautiful Baking</a>
          
    	</p>
      </div>
    </div>
  </div>
</footer>

<script src="http://www.brainbaking.com//js/jquery-1.11.2.min.js"></script>
<script src="http://www.brainbaking.com//js/bootstrap.min.js"></script>
<script src="http://www.brainbaking.com//js/main.js"></script>
<script src="http://www.brainbaking.com/js/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>




  </body>
</html>
